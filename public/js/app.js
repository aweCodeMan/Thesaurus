angular.module("thesaurus",["ui.bootstrap"]),angular.module("thesaurus").config(function(e){e.defaults.headers.common["X-Requested-With"]="XMLHttpRequest"}),angular.module("thesaurus").directive("addLinkedWord",function(){return{restrict:"E",scope:{url:"@",type:"@",word:"=",urlAutocomplete:"@"},controller:function(e,o,r){function n(e,o,r){return e.id==o.id?1==r?"Beseda ne more biti sopomenka sama sebi.":"Beseda ne more biti protipomenka sama sebi.":"Prišlo je do napake pri pošiljanju podatkov. Prosim poskusite znova."}e.showForm=!1,e.toggleForm=function(){e.showForm=!e.showForm},e.getWords=function(o){return r.getWords(o,e.urlAutocomplete)},e.sendLinkedWord=function(r){r&&(e.disable=!0,e.loading=!0,e.error=void 0,o.post(e.url,{wordId:e.word.id,linkedWordId:r.id,type:e.type}).then(function(e){window.location.reload()},function(o){e.disable=!1,e.loading=!1,e.error=n(e.word,r,e.type)}))}},templateUrl:"/templates/AddLinkedWord.html"}}),angular.module("thesaurus").factory("DeleteWordModal",function(e){var o={openModal:function(o,r,n,t){var i=e.open({templateUrl:"/templates/DeleteWordModal.html",controller:"DeleteWordModalInstanceController",resolve:{word:function(){return o},linkedWord:function(){return r},type:function(){return n},url:function(){return t}}});return i.result}};return o}),angular.module("thesaurus").controller("DeleteWordModalInstanceController",function(e,o,r,n,t,i,d){e.word=n,e.linkedWord=t,e.type=i,e.ok=function(){e.disabled=!0,e.error=void 0,r.post(d,{_method:"DELETE",confirmation:e.confirm,linkedWordId:t.id,wordId:n.id,type:i}).then(function(e){o.close()},function(o){e.disabled=!1,e.error="Prišlo je do napake pri pošiljanju podatkov. Prosim poskusite znova."})},e.cancel=function(){o.dismiss()}}),angular.module("thesaurus").directive("removeLinkedWord",function(){return{restrict:"E",scope:{word:"=",linkedWord:"=",type:"@",url:"@"},controller:function(e,o){e.remove=function(){o.openModal(e.word,e.linkedWord,e.type,e.url).then(function(e){window.location.reload()})}},template:'<span class="glyphicon glyphicon-trash remove-linked-word" ng-click="remove()"></span>'}}),angular.module("thesaurus").directive("searchWord",function(){return{restrict:"E",scope:{url:"@",size:"@",placeholder:"@"},controller:function(e,o,r){e.selectModel=function(e){window.location.href=e.link},e.getWords=function(o){return r.getWords(o,e.url)}},link:function(e,o,r){e.size&&"large"==e.size.toLowerCase()&&o.addClass("search-large")},templateUrl:"/templates/SearchWord.html"}}),angular.module("thesaurus").factory("Words",function(e){function o(o,n){return e.get(n,{params:{query:o}}).then(function(e){return 0==e.data.length?(e.data.push({empty:!0}),e.data):e.data.map(function(e){return e.typeaheadDefinition=r(e.definitions),e})})}function r(e){if(!e)return"";var o=e.split(/:/);return o&&o[0]?o[0]:""}return{getWords:function(e,r){return o(e,r)}}});